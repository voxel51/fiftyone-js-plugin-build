"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("@rollup/plugin-node-resolve"),_=require("@vitejs/plugin-react"),a=require("node:fs"),t=require("node:path"),s=require("vite"),l=require("vite-plugin-externalize-deps"),f=["@fiftyone/components","@fiftyone/operators","@fiftyone/state","@fiftyone/utilities","@fiftyone/spaces","@fiftyone/plugins","@fiftyone/aggregations","@fiftyone/core","@fiftyone/embeddings","@fiftyone/looker","@fiftyone/map","@fiftyone/playback","@fiftyone/spotlight","@fiftyone/flashlight","@fiftyone/looker-3d","@mui/material","styled-components","recoil","react","react-dom"];async function c(n){const e=t.join(n,"package.json"),i=await a.promises.readFile(e,"utf-8");return JSON.parse(i)}function u(){const{FIFTYONE_DIR:n}=process.env;if(!n)throw new Error("FIFTYONE_DIR environment variable not set. This is required to resolve @fiftyone/* imports.");return{name:"fiftyone-bundle-private-packages",enforce:"pre",resolveId:e=>{if(e.startsWith("@fiftyone")&&!f.includes(e)){const i=e.split("/")[1],o=`${n}/app/packages/${i}`;return this.resolve(o,e,{skipSelf:!0})}return null}}}async function y(n,e={}){const i=await c(n);return s.defineConfig({mode:"development",plugins:[u(),r(),_({jsxRuntime:"classic"}),l.externalizeDeps({deps:!0,devDeps:!1,useFile:t.join(process.cwd(),"package.json"),except:(e==null?void 0:e.forceBundleDependencies)??[],include:f}),...(e==null?void 0:e.plugins)??[]],build:{minify:!0,lib:{entry:t.join(n,i.main),name:i.name,fileName:o=>`index.${o}.js`,formats:["umd"]},rollupOptions:{output:{globals:{react:"React",recoil:"recoil","react-dom":"ReactDOM","jsx-runtime":"jsx","react/jsx-runtime":"jsx","@fiftyone/state":"__fos__","@fiftyone/plugins":"__fop__","@fiftyone/operators":"__foo__","@fiftyone/components":"__foc__","@fiftyone/utilities":"__fou__","@fiftyone/spaces":"__fosp__","@fiftyone/aggregations":"__foa__","@fiftyone/core":"__focore__","@fiftyone/embeddings":"__foe__","@fiftyone/looker":"__fol__","@fiftyone/map":"__fom__","@fiftyone/playback":"__fopb__","@fiftyone/spotlight":"__fosl__","@fiftyone/flashlight":"__fof__","@fiftyone/looker-3d":"__fol3d__","@mui/material":"__mui__","styled-components":"__styled__"}}},...(e==null?void 0:e.buildConfigOverride)??{}},define:{"process.env.NODE_ENV":'"development"'},optimizeDeps:{exclude:["react","react-dom"]},...(e==null?void 0:e.vite)??{}})}exports.defineConfig=y;
