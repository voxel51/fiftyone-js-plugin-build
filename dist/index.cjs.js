"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("@rollup/plugin-node-resolve"),s=require("@vitejs/plugin-react"),i=require("node:path"),f=require("vite"),c=require("vite-plugin-externalize-deps"),p=require("node:fs");async function u(e){const t=i.join(e,"package.json"),n=await p.promises.readFile(t,"utf-8");return JSON.parse(n)}function l(){const{FIFTYONE_DIR:e}=process.env;if(!e)throw new Error("FIFTYONE_DIR environment variable not set. This is required to resolve @fiftyone/* imports.");return{name:"fiftyone-bundle-private-packages",enforce:"pre",resolveId:t=>{if(t.startsWith("@fiftyone")){const n=t.split("/")[1],o=`${e}/app/packages/${n}`;return this.resolve(o,t,{skipSelf:!0})}return null}}}async function _(e,t=[],n){const o=await u(e);return f.defineConfig({mode:"development",plugins:[l(),a(),s({jsxRuntime:"classic"}),s(),c.externalizeDeps({deps:!0,devDeps:!1,useFile:i.join(process.cwd(),"package.json"),except:t})],build:{minify:!0,lib:{entry:i.join(e,o.main),name:o.name,fileName:r=>`index.${r}.js`,formats:["umd"]},rollupOptions:{output:{globals:{react:"React","react-dom":"ReactDOM","jsx-runtime":"jsx","react/jsx-runtime":"jsx","@fiftyone/state":"__fos__","@fiftyone/plugins":"__fop__","@fiftyone/operators":"__foo__","@fiftyone/components":"__foc__","@fiftyone/utilities":"__fou__","@fiftyone/spaces":"__fosp__","@mui/material":"__mui__","styled-components":"__styled__"}}},...n.buildConfigOverride},define:{"process.env.NODE_ENV":'"development"'},optimizeDeps:{exclude:["react","react-dom"]}})}exports.defineConfig=_;
